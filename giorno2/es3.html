<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>save me</title>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.11.11/lib/p5.min.js"></script>
  <style>
    
    body { margin: 0; padding: 0; overflow: hidden; background-color: #ffcce5; } /* Rosa di backup */
    
    /* Il video riempie tutta la pagina dietro al canvas */
    #bg-video {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1; /* Lo mette dietro a tutto */
      object-fit: cover;
      
    }

    canvas { display: block; }

    #titolo {
      position: absolute;
      top: 50px;
      width: 100%;
      text-align: center;
      font-family: Arial, Helvetica, sans-serif;
      font-size: 8vw; /* Dimensione reattiva basata sulla larghezza della finestra */
      font-weight: normal;
      color: rgba(252, 109, 226, 0.454);
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
      pointer-events: none; /* Permette di cliccare attraverso la scritta */
    }
  </style>
</head>
<body>

  <div id="titolo">save me</div>

  <video autoplay muted loop id="bg-video">
    <source src="181333-866112969_small.mp4" type="video/mp4">
  </video>

<script>
let modello;
let textureImmagine;
let scalaSoggetto = 3;
let posX = 0;
let posY = 0;

function preload() {
  // 1. Carica il modello
  modello = loadModel('ioblend.obj', true);
  
  // 2. Carica la texture (se hai un file .jpg o .png)
  // Se non hai una texture, commenta la riga sotto
  textureImmagine = loadImage('Scaniverse_2026_02_03_114159.jpg');
}

function setup() {
  createCanvas(windowWidth, windowHeight, WEBGL);
}

function draw() {
  clear();

  // Luci per lo Shading (fondamentali per vedere la forma)
  ambientLight(100);
  directionalLight(255, 255, 255, 0, 1, -1);
  pointLight(255, 255, 255, 200, -200, 300);

  // --- TRASCINAMENTO ---
  if (mouseIsPressed) {
    posX += movedX;
    posY += movedY;
  }
  translate(posX, posY, 0);

  // --- RIMPICCIOLIMENTO ---
  if (!mouseIsPressed && scalaSoggetto > 0) {
    scalaSoggetto -= 0.005;
  }

  // --- CONTROLLO ROTAZIONE ---
  let rotX = map(frameCount, 0, width, -PI, PI);
  rotateX(rotX);
  let rotY = map(frameCount, 0, width, -PI, PI);
  rotateY(rotY);
  let rotZ = map(frameCount, 0, width, -PI, PI);
  rotateZ(rotZ);

  // --- CORREZIONE ORIENTAMENTO (Sottosopra) ---
  // Ruotiamo di 180 gradi (PI) sull'asse Z o X per raddrizzarlo
  rotateZ(PI); 
  // Se è ancora strano, prova a commentare rotateZ e usare:
  // rotateX(PI);
  scale(scalaSoggetto);

  // --- MATERIALE E TEXTURE ---
  push();
  noStroke();
  
  if (textureImmagine) {
    texture(textureImmagine); ('Scaniverse_2026_02_03_114159.jpg')
  } else {
    // Se non c'è texture, diamo un colore e uno shading definito
    specularMaterial(100); // Bianco che riflette le luci
    shininess(5);
  }

  model(modello);
  pop();
}

function windowResized() {
  resizeCanvas(windowWidth, windowHeight);
}

// --- CAMBIO TESTO ---
function keyPressed() {
  // Se viene premuto il tasto 't'
  if (key === 't' || key === 'T') {
    let elementoTitolo = document.getElementById('titolo');
    let testoCorrente = elementoTitolo.innerText;
    let nuovoTesto = prompt("Scrivi la nuova frase:", testoCorrente);
    if (nuovoTesto !== null && nuovoTesto.trim() !== "") {
      elementoTitolo.innerText = nuovoTesto;
    }
  }
}
</script>

</body>
</html>